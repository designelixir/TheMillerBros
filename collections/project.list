
<div id="featured-project-slider">
    <div style="display: inline-flex; height: calc(100vh - 125px); width: 100%">
    <div style=" height: 100%; width: 100%; display: inline-flex;">


{.repeated section items}

{#  PROJECT SLIDE ---------------------------------------------------  }
    <div class="project" data-item-id="{id}">
        <div class="vimeo-wrapper" style="background-image: url('{structuredContent.oembed.thumbnailUrl}?format=original');">
            <iframe class="backgroundiframe" src='https://player.vimeo.com/video/{customContent.vimeocode}?background=1&autoplay=1&loop=1&byline=0&title=0' frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
        </div>
        <span style="height: 50%"></span>
        <span class="summary-title">
            <span>
            
                <span style="display: inline-flex;">
                    <h1 class="project-title">{title}</h1>
                    <span class="case-study-toggle-arrow">
                        <img style="padding-left: 10px; height: 24px"src="../assets/arrow.svg"/>
                        <div class="project-case-study-window">
                            {#  CASE STUDY NAVIGATION  }
                            <div class="project-case-study-window-nav fade-in">
                                <span>
                                    <img style="height: 100%; width: auto;" src="../assets/miller-bros-lettermark.svg"/>
                                </span>

                                <span class="hover-indication exit-case-study">
                                    <span><h4 style="font-size: 14px; text-align: right;">Back to <br> Homepage</h4></span>
                                    <span style="width: 75px"> <button class="circle-button-blue"> <h3>X</h3> </button></span>
                                </span>
                            </div>
                            {#  CASE STUDY  }
                            <div class="project-case-study-wrapper">
                                {# CASE STUDY VIDEO   }
                            <div class="project-case-study-iframe" style="border: 3px solid orange; width: 100vw; ">
                                    <div style="padding:56.25% 0 0 0; position:relative; height: 80%; overflow-y: hidden;">
                                        <iframe id="case-study-iframe" src="https://player.vimeo.com/video/{customContent.vimeocode}?h=d4146e6249&autoplay=0&title=0&byline=0&portrait=0" style="position:absolute;top:0;left:0;width:110%;height:110%;" frameborder="0" allow="fullscreen; picture-in-picture" allowfullscreen>
                                        </iframe>
                                    </div>
                            </div>
                                {#  CASE STUDY INFORMATION  }
                                <div class="project-case-study-info">
                                    <div class="case-study-title">
                                        <h1 class="project-title">{title}</h1>
                                        <h5>{customContent.shortdescription}</h5>
                                    </div>
                                    <div class="case-study-text texture">
                                        <span class="case-study-summary">
                                                <h4>Project Summary </h4>   
                                                <span class="blue-line"></span>
                                                <p>{body}</p>
                                        </span>
                                        <span class="case-study-credits">
                                            <h4> Credits </h4>
                                            <span class="blue-line"></span>
                                            <span>{customContent.credits.html}</span>
                                        </span>
                                    </div>
                                    {#  TESTIMONIAL  }
                                    <div class="case-study-testimonial texture">
                                        {.if customContent.testimonial}
                                            <span id="testimonial">
                                                <p>{customContent.testimonial}</p>
                                            </span>
                                            <p>-{customContent.testimonial-name}</p>
                                        {.or}
                                        
                                        {.end}
                                            
                                    </div>
                                    {#  BEHIND THE SCENES  }
                                    <div id="behindthescenes-grid">
                                        <div class="bts-row">
                                            {.repeated section customContent.behindthescenes}
                                                <img class="bts-img" src="{assetUrl}"/>
                                            {.end}
                                        </div>
                                    </div> 

                                </div>
                            </div>

                        </div>
                    </span>
                </span>
                <h4>{customContent.brand}</h4> 
                </span>
            </span>

        
    </div>

{#  PROJECT CASE STUDY ---------------------------------------------------  }


{.end}
    </div>

</div>


        <span id="project-counter">
            <img src="../assets/tan-textured-circle.svg" class="counter">
        </span>
</div>

    <div id="next-slide">
        <img src="../assets/nav-arrow.svg" />
    </div>




<section class="texture" style="background: black; width: 100vw!important; padding: 25px;">

<span style="width: 100%; height: 25px; border: 2px solid yellow; color: white; text-align: center;"> COME ON DOWN! </span>
</section>

    <squarespace:block-field columns="12"/>


<script>





{#  count number of slides  }
var theseProjects = document.getElementsByClassName('project');
var active = 0;
var counter = theseProjects.length;

{#  add indexing dots  }
for (let i = 1; i < counter; i++) {
$("#project-counter").append($(".counter").last().clone(true));
}

{#  change slide  }
$('#next-slide').click(function(){
    $('.project:eq('+active+')').css({"display": "none"})
    $('.counter:eq('+active+')').attr("src", "../assets/tan-textured-circle.svg")  

     if(active >= counter - 1){active = 0;} 
     else {active = active + 1;}
    $('.project:eq('+active+')').css("display", "block");
    $('.counter:eq('+active+')').attr("src", "../assets/black-textured-circle.svg")  

    clearInterval(timerID);
})
{#  delayed slides  }
var timerID = 
    setInterval(function() {
    $('.project:eq('+active+')').css("display", "none");
    $('.counter:eq('+active+')').attr("src", "../assets/tan-textured-circle.svg")  

        if(active >= counter - 1){active = 0;} 
        else {active = active + 1;}
    $('.project:eq('+active+')').css("display", "block");
        $('.counter:eq('+active+')').attr("src", "../assets/black-textured-circle.svg")  

    }, 10000);

{#  open respective case study window  }
$('.project-title').click(function(){
        clearInterval(timerID);

    $('.project-case-study-window:eq('+active+')').show("slow", function(){
        $('.project-case-study-window:eq('+active+')').css({"opacity": "1", "animation":"scale-up-bottom .4s cubic-bezier(.39,.575,.565,1.000) both"})  
    })
})


{#  close case study window  }
$('.exit-case-study').click(function(){
    $('#case-study-iframe').attr("src", $('#case-study-iframe').attr("src"));
    $('.project-case-study-window:eq('+active+')').hide("slow", function(){
        $('.project-case-study-window:eq('+active+')').css({"animation": "scale-out-bottom .5s cubic-bezier(.55,.085,.68,.53) both", "opacity": "0"})  
    })
})

$('.summary-title').on("mouseover",function(){
    console.log("moused")
    $('.case-study-toggle-arrow').css("background-image","url('../assets/blue-textured-circle.svg')");
})

$('.summary-title').on("mouseout",function(){
    console.log("moused away")
    $('.case-study-toggle-arrow').css("background-image","none");
})


{#  initial setup  }
window.addEventListener('load', (event) => {
  console.log('page is fully loaded');
$('.project:eq('+active+')').css("display", "block")
$('.counter:eq('+active+')').attr("src", "../assets/black-textured-circle.svg")  

  

});

function mediaQuery(x) {
  if (x.matches) { 
    $('h1').css({"font-size": "36px"})
    $('#next-slide').css("width", "35px")
    $('#next-slide img').css("margin-left", "0");
    $('.case-study-text').css({"display":"block"})
    $('.case-study-summary').css({"width":"100%"});
    $('.case-study-credits').css({"width":"100%", "margin-top": "25px"})
    $('.bts-img').css("width", "45%")
    {#  case study  }
   

  } else {
    $('h1').css("font-size", "48px")
    $('#next-slide').css("width", "50px")
    $('#next-slide img').css("margin-left", "20px")

    {#  case study  }
    $('.case-study-text').css({"display":"inline-flex"})
    $('.case-study-summary').css({"width":"60%"});
    $('.case-study-credits').css({"width":"35%", "margin-top":"0px"})
    $('.bts-img').css("width", "31%")

  }
}

var x = window.matchMedia("(max-width: 550px)")
mediaQuery(x) 
x.addListener(mediaQuery) 



</script>