
<div id="featured-project-slider">
    <div style=" height: calc(100vh - 125px); width: 100%; border: 3px solid magenta;">


{.repeated section items}

{#  PROJECT SLIDE ---------------------------------------------------  }
    <div class="project " data-item-id="{id}">
        <div class="vimeo-wrapper slide-in-right" style="background-image: url('{structuredContent.oembed.thumbnailUrl}?format=original');">
            <iframe class="backgroundiframe" src='https://player.vimeo.com/video/{customContent.vimeocode}?background=1&autoplay=1&loop=1&byline=0&title=0' frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
        </div>
        <span style="height: 25%; border: 2px solid blue;"></span>
        <span class="summary-title radial-gradient fade-in">
            <span id="summary-title-button-wrapper" style="border: 2px solid white;">

                <span style="border: 1px solid yellow; width: 90%;">
                    <h1 class="project-title">{title}</h1>
                    <h4 style="color: white; margin-left: 39px;">{customContent.brand}</h4> 
                </span>
                <span class="case-study-toggle-arrow">
                    <span id="case-study-toggle-arrow-wrapper">
                        <img style="padding-left: 10px; width: 50%;"src="../assets/arrow.svg"/>
                    </span>                            
                </span>
            </span>
             {#  PROJECT CASE STUDY ---------------------------------------------------  }
                    
        </span>
    </div>
<div class="case-study-block" >



</div>
{#  PROJECT END ---------------------------------------------------  }
{.end}
        <span id="project-counter">
            <img src="../assets/tan-textured-circle.svg" class="counter">
        </span>
    </div>

</div>
<div id="next-slide">
    <img src="../assets/nav-arrow.svg" />
</div>

<section class="texture inset-box-shadow" style="background: #241E1F; width: 100vw!important; border: 1px solid red;   ">

        <span style="background: #241E1F; display: flex; align-items: center; justify-content: center; width: 100%;"> <img src="../assets/nav-arrow.svg" style="transform: rotate(90deg); width: 10px; "/> </span>

<div class="about">
    <div class="about-header">
        <h6 style="font-size: 48px;"> Telling stories from the  </h6>
        <h6 style="padding-left: 10%; font-size: 72px; margin-top: -25px;">road less traveled </h6>
        <span style="margin-left: 10%; margin-top: -10px; z-index: 3;" class="yellow-line"></span>
    </div>

    
</div>

</section>



<script>

{#  open respective case study window  }
$('.summary-title').click(function(){
        clearInterval(timerID);
    $('.case-study-block').css({"animation":"scale-up-bottom .4s cubic-bezier(.39,.575,.565,1.000) both", "position":"fixed", "top":"0", "left": "0", "z-index": "10"})
    $('body').css("overflow: hidden;")
})


{#  close case study window  }
$('.exit-case-study').click(function(){
    $('#case-study-iframe').attr("src", $('#case-study-iframe').attr("src"));
    $('.project-case-study-window:eq('+active+')').hide("slow", function(){
        $('.project-case-study-window:eq('+active+')').css({"animation": "scale-out-bottom .5s cubic-bezier(.55,.085,.68,.53) both", "opacity": "0"})  

    })
})



{#  count number of slides  }
var theseProjects = document.getElementsByClassName('project');
var active = 0;
var counter = theseProjects.length;

{#  add indexing dots  }
for (let i = 1; i < counter; i++) {
$("#project-counter").append($(".counter").last().clone(true));
}

{#  change slide  }
$('#next-slide').click(function(){
    $('.project:eq('+active+')').delay(100).fadeOut(300)
    $('.counter:eq('+active+')').attr("src", "../assets/tan-textured-circle.svg")  

     if(active >= counter - 1){active = 0;} 
     else {active = active + 1;}
    $('.project:eq('+active+')').css("display", "block");
    $('.counter:eq('+active+')').attr("src", "../assets/yellow-textured-circle.svg")  

    clearInterval(timerID);
})
{#  delayed slides  }
var timerID = 
    setInterval(function() {
    $('.project:eq('+active+')').css("display", "none");
    $('.counter:eq('+active+')').attr("src", "../assets/tan-textured-circle.svg")  

        if(active >= counter - 1){active = 0;} 
        else {active = active + 1;}
    $('.project:eq('+active+')').css("display", "block");
        $('.counter:eq('+active+')').attr("src", "../assets/yellow-textured-circle.svg")  

    }, 10000);






{#  initial setup  }
window.addEventListener('load', (event) => {
  console.log('page is fully loaded');
$('.project:eq('+active+')').css("display", "block")
$('.counter:eq('+active+')').attr("src", "../assets/yellow-textured-circle.svg")  

  

});

function mediaQuery(x) {
  if (x.matches) { 
    $('h1').css({"font-size": "36px"})
    $('#next-slide').css("width", "35px")
    $('#next-slide img').css("margin-left", "0");
    $('#summary-credits-block').css({"display":"block"})
    $('.case-study-summary').css({"width":"100%"});
    $('.case-study-credits').css({"width":"100%", "margin-top": "25px"})
    $('#bts-photos-grid').css('column-count', '1')

  } else {
    $('h1').css("font-size", "48px")
    $('#next-slide').css("width", "50px")
    $('#next-slide img').css("margin-left", "20px")

    {#  case study  }
    $('#summary-credits-block').css({"display":"inline-flex"})
    $('.case-study-summary').css({"width":"60%"});
    $('.case-study-credits').css({"width":"38%", "margin-top":"0px"})
    $('#bts-photos-grid').css('column-count', '3')

  }
}

var x = window.matchMedia("(max-width: 550px)")
mediaQuery(x) 
x.addListener(mediaQuery) 



$('.back-to-top').click(function(){
  $('.project-case-study-window').scrollTop(0);
})

$('.expand-button').click(function() {
  console.log('ya')
    let elem = document.getElementById("fullcut-iframe");

  elem.requestFullscreen()

})


</script>