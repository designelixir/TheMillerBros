<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="stylesheet" href="https://use.typekit.net/ctq0biw.css">
    <link rel="stylesheet" href="styles/case-study.less">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    {squarespace-headers}
  </head>
    <body id="{squarespace.page-id}" class="{squarespace.page-classes}">
        <header class="site-header">
            <squarespace:navigation navigationId="siteNav" template="site-navigation" />
        </header>

     

   
    <section id="featured-projects">
        <div id="slide-container">
        {.repeated section items}
            <div class="slide">
                <div class="project">
                <div id="traveling-button" > </div>
                    <div class="project-wrapper" style="z-index: 0; width: 100%; height: 100%; position: relative; ">
                        <div class="vimeo-bg-wrapper" style="background-image: url('{structuredContent.oembed.thumbnailUrl}?format=original');" >
                            <iframe class="vimeo-bg-iframe" src='https://player.vimeo.com/video/{customContent.vimeocode}?background=1&autoplay=1&loop=1&byline=0&title=0' frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                        </div>

                        <div class="title-container">
                        {#  LINKED SLIDERS  }
                        {.equal? customContent.customType "LinkedSlider"} 
                            <div class="title-wrapper" onclick="location.href='{customContent.clickthru}'">
                                <a href='{customContent.clickthru}' style="text-decoration: none; ">
                                    <div id="linked-slider-wrapper" >
                                        <h1 class="link-title">{title}</h1>
                                        <h4 style="color: white;">{body}</h4> 
                                    </div>
                                </a>
                            </div>
                            {.or}
                            {#  PROJECT SLIDERS}
                            
                            <div class="title-wrapper toggle-case-study" id="salmon">
                                <div class="summary-title " id="orange">
                                    <div class="summary-title-button-wrapper drop-shadow">
                                        <div class="title-brand-wrapper" >
                                            <h1 class="project-title ">{title}</h1>
                                            <h4 class="project-brand">{customContent.brand}</h4> 
                                        </div>
                                      </div>
                                        
                                        
                                                     
                                </div>
                            </div>
                            {.end}
                        </div>
                    </div>
                </div>
            </div>
                {#  CASE STUDY WINDOWS  }
                {.equal? customContent.customType "Project"} 
                    <div class="case-study-window texture" style="display: none; position: absolute; top: 0; left: 0; z-index: 25; height: 100vh; width: 100vw;">
                        <div class="project-case-study-wrapper">
                            {#  project navigation  }
                            <div class="case-study-nav inset-box-shadow">
                                <span>               
                                    <img src="../assets/Miller-Bros-Lettermark-White.svg" alt="Miller Bros Lettermark Logo" />
                                </span>
                                <span style="justify-content: flex-end;">
                                    <button id="toggle-fullscreen-{id}" class="expand-button hover-indication" aria-label="Toggle Full Screen Video Window"></button>
                                    <button class="circle-button-blue toggle-case-study" id="toggle-close-{id}" aria-label="Close Portfolio Video Window"></button>
                                </span>
                            </div>

                            {#  iframe  }
                            <div class="fullcut-iframe-container" style="background-image: url('{structuredContent.oembed.thumbnailUrl}?format=original');">
                                <div class="fullcut-iframe-wrapper" style="padding:56.25% 0 0 0; position:relative; overflow-y: hidden; ">
                                    <iframe id="fullcut-iframe" class="case-study-iframe" src="https://player.vimeo.com/video/{customContent.vimeocode}?h=5d02ec9719&title=0&byline=0&portrait=0" style="position:absolute;top:0;left:0;width:100%; height: 100%;  overflow-y: hidden; max-width: 1700px; max-height: 950px;" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                            


                            {#  project details  }
                            <div class="case-study-title fade-in ">
                                <h1>{title}</h1>
                                <h5>{customContent.shortdescription}</h5>
                            </div>
                            <div class="case-study-text tan-texture inset-box-shadow">
                                <span class="case-study-block" id="summary-credits-block">
                                    <span class="summary">
                                        <h4 style="padding-bottom: 10px; width: 50%;" class="yellow-line">Project Summary </h4>   
                                        
                                        <p>{body}</p>
                                    </span>
                                    <span class="credits">
                                        <h4 style="padding-bottom: 10px" class="yellow-line"> Credits </h4>
                                        <p>{customContent.credits.html}</p>
                                    </span>
                                </span>
                                
                                {#  TESTIMONIAL  }
                                <span class="case-study-block">
                                    <span class="case-study-testimonial">
                                        {.if customContent.testimonial}
                                            <span id="testimonial">
                                                <p>{customContent.testimonial}</p>
                                            </span>
                                            <h5>-{customContent.testimonial-name}</h5>
                                        {.or}
                                        
                                        {.end}
                                    </span>
                                </span>

                                <span class="case-study-text-block">
                                    <span>
                                        {.if customContent.additional-video1}
                                        <h4>Additional Videos </h4>
                                        <span class="yellow-line"></span>
                                        <br>
                                            <div class="extra-video">
                                            <div style="padding:56.25% 0 0 0;position:relative;">
                                                <iframe src="https://player.vimeo.com/video/{customContent.additional-video1}?h=a80429b32e&title=0&byline=0&portrait=0" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>
                                            </div>
                                        {.or}
                                        {.end}
                                        {.if customContent.additional-video2}
                                            <div class="extra-video">
                                            <div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/{customContent.additional-video2}?h=a80429b32e&title=0&byline=0&portrait=0" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>
                                            </div>
                                        {.or}
                                        {.end}

                                    </span>
                                </span>
                            </div>
                            {#  BEHIND THE SCENES  }
                                <div id="bts" class="inset-box-shadow">
                                    <h6 style="text-align: center;"> Behind the Scenes </h6>

                                    <div id="bts-photos-grid" >
                                        {.repeated section customContent.behindthescenes}
                                            <img class="bts-img" src="{assetUrl}"/>
                                        {.end}
                                    </div>
                                    <span style="display: flex; align-items: center; justify-content: center; padding: 50px; color: white;">
                                        <button class="circle-button-blue toggle-case-study" id="toggle-close-{id}" style="width: 100%;" aria-label="Close Portfolio Video Window"></button>
                                    </span>
                                </div> 
                        </div>
                    </div>
                {.end}
            {.end}

            <div id="project-counter">
                <a onclick="(goToSlider(data))" class="counter"></a>
            </div>
           
        </div>
        <div id="next-slide">
            <img id="slide-arrow" src="../assets/nav-arrow.svg" alt="next slide arrow" />
        </div>
    </section>
    <section class="texture inset-box-shadow">
      <div style="width: 100%; height: 50px; text-align: center; color: white;">
        <p class="bold-paragraph">HEY!!!!</p>
      </div>
      <div style=" width: 100vw; padding: 100px 50px;">
          <squarespace:block-field id="homepage-about-summary" class="bold-paragraph" columns="1"/>
          

      </div>
    </section>

   
    <squarespace:navigation navigationId="footerNav" template="footer" />
    <!-- combo and minify scripts when not logged in -->
    <squarespace:script src="site.js" combo="{.if authenticatedAccount}false{.or}true{.end}" />
    <!-- other scripts, and footer code injection -->
    {squarespace-footers}

  </body>
</html>
<script>



var allSlides = document.getElementsByClassName('project');
var active = 0;
var counter = allSlides.length;
var travelingbutton = document.querySelector("#traveling-button");
var followMouseBool = false;
var divRect = document.getElementById('salmon').getBoundingClientRect();
var small = document.getElementById('orange');
var big = document.getElementById('salmon'); 
var smallRect = small.getBoundingClientRect();
var bigRect = big.getBoundingClientRect();
var itemRect = travelingbutton.getBoundingClientRect();

let positionButtonTimer = setTimeout(positionButton, 0);

{#  THINGS THAT HAPPEN WHEN PAGE LOADS  }
window.addEventListener('DOMContentLoaded', (event) => {
      $('.counter:eq('+active+')').css("background-image", "url(assets/shapes/yellow-textured-circle.svg)")  
});




for (let i = 1; i < counter; i++) {$("#project-counter").append($(".counter").last().clone(true));}
var cls = document.getElementsByClassName("counter"); 
for (n=0, length = cls.length; n < length; n++) {cls[n].data = n ; }



function positionButton(){
  $('#traveling-button').css("display","block")
  if (!followMouseBool){
      var bigRect = big.getBoundingClientRect();
      var itemRect = travelingbutton.getBoundingClientRect();
      var x = smallRect.right - 100 ;
      var y = bigRect.bottom - 100 ;
      $('#traveling-button').animate({
        'top':'0', 'left':'0', 'right':'0', 'bottom':'0'
      }, 0, function(){
        travelingbutton.style.transform = "translate3d(" +  x + "px, " + y + "px, 0)";
      })
    }
}


function goToSlider(active){
  positionButton
  console.log("received " + active)
  var activate = allSlides[active];
  activate.scrollIntoView();
  for (let i = 0; i < counter; i++) {
      $('.counter').css("background-image", "url(assets/shapes/tan-textured-circle.svg)")  
  }$('.counter:eq('+active+')').css("background-image", "url(assets/shapes/yellow-textured-circle.svg)")  

} 

 var autoPlayTimer = setInterval(function() {
      if(active >= counter - 1){active = 0;} 
      else {active = active + 1;}
      goToSlider(active)
  }, 10000);

$('#next-slide').click(function() {
      if(active >= counter - 1){active = 0;} 
      else {active = active + 1;}
      goToSlider(active);
      clearInterval(autoPlayTimer);
  });

$('.toggle-case-study').click(function(){
  clearInterval(autoPlayTimer);
  var count = $('.toggle-case-study').data("count") || 0;
  $('.toggle-case-study').data("count", ++count);
  if ((count % 2) != 0 ){
    $('.case-study-window:eq('+active+')').slideDown(500);
  } else {
    $('.case-study-window:eq('+active+')').slideUp(500);
    $('.case-study-iframe:eq('+active+')').attr("src", $('.case-study-iframe:eq('+active+')').attr("src"));
    $('.additional-video-iframe-one:eq('+active+')').attr("src", $('.additional-video-iframe-one:eq('+active+')').attr("src"));
    $('.additional-video-iframe-two:eq('+active+')').attr("src", $('.additional-video-iframe-two:eq('+active+')').attr("src"));
  }
});

var sliderTop = $("#featured-projects").offset().top; //gets offset of header
var sliderHeight = $("#featured-projects").outerHeight(); //gets height of header

$(window).scroll(function(){
    if($(window).scrollTop() > (sliderTop + sliderHeight)){
      clearInterval(autoPlayTimer);
    }
});

// MEDIA QUERY 
function mediaQuery(x800) {
  if (x800.matches) { 
    $('.project-title').css({"font-size":"55px", "line-height":"55px"});
    $('.link-title').css({"font-size":"55px" , "line-height":"55px"});
    $('.case-study-block').css({"display":"block"})
    $('.summary').css({"width":"100%"});
    $('.credits').css({"width":"100%"});
    $('.yellow-line').css("width", "75%");
    $('#bts-photos-grid').css('column-count', '2')

  } else {
    $('.project-title').css({"font-size":"75px", "line-height":"75px"});
    $('.link-title').css({"font-size":"75px", "line-height":"75px"});
    $('.case-study-block').css({"display":"inline-flex"})
    $('.summary').css({"width":"70%"});
    $('.credits').css({"width":"30%"});
    $('#bts-photos-grid').css('column-count', '3')
    $('.yellow-line').css({"width":"50%", "min-width":"150px"});
  }
}
var x800 = window.matchMedia("(max-width: 800px)")
mediaQuery(x800) 
x800.addListener(mediaQuery); 


</script>